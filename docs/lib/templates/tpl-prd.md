# {{EPIC_NAME}} PRD - {{VERSION}}（{{EPIC_ID}}）

> 文档路径：`/docs/{{EPIC_DIR}}/prd/PRD-{{EPIC_ID}}-{{VERSION}}.md`
>
> * EPIC_ID：{{EPIC_ID}}
> * EPIC_DIR：`{{EPIC_DIR}}`
> * 文档状态：草稿 / 评审中 / 正式
> * 版本：{{VERSION}}
> * 创建人：{{OWNER}}
> * 创建日期：{{YYYY-MM-DD}}
> * 更新日期：{{YYYY-MM-DD}}

---

## 0. 关联信息（References）

* biz-overview：`/docs/_project/biz-overview.md`
* Story：`../story/STORY-*.md`
* Tech Design：`../tech/TECH-{{EPIC_ID}}-v1.md`（或 `TECH-*.md`）
* Proj Plan：`../proj/PROJ-{{EPIC_ID}}-v1.md`

---

## 1. 背景与动机（Background）

* 现状：
* 问题：
* 影响：

## 2. 目标与成功标准（Goals & Success Metrics）

* 本 Epic 业务目标（摘自 biz-overview）：
* 本 Epic 交付目标：

## 3. 范围与非目标（Scope & Non-goals）

* In Scope：
* Out of Scope：

## 4. 用户与场景（Users & Scenarios）

### 4.1 用户旅程（简化版）

> 目的：帮助理解用户在特定场景下的完整体验流程，包括触点、情绪、痛点等。
>
> 形式：简化版即可，重点在理解"为什么"，而不是详细步骤。

**模板：**
```
场景：{{场景名称}}

用户：{{用户类型}}
背景：{{当前状态/环境}}
操作：{{关键操作}}
期望：{{期望结果}}
情绪：{{用户情绪变化}}

主要触点：
- {{触点1}}：{{用户想法/感受}}
- {{触点2}}：{{用户想法/感受}}
...

痛点：
- {{痛点1}}
- {{痛点2}}
...
```

**示例（Commander Console）：**
```
场景：查看全局状态

用户：开发者
背景：4 个 dev 并行工作，需要跟踪任务进度
操作：打开控制台查看知识图谱
期望：一眼看到所有任务的状态和依赖关系
情绪：😟 焦虑 → 😌 安心

主要触点：
- 打开控制台 → 一眼看到全局结构
- 点击节点 → 快速查看详情
- 切换 Agent → 无缝查看对话历史

痛点：
- 不知道哪个 Agent 在做什么
- 忘了任务之间的依赖关系
- 需要在多个终端间切换
```

### 4.2 用户角色

* 角色：
* 角色：
* 角色：

### 4.3 关键场景

* 场景：
* 场景：
* 场景：

## 5. 功能需求（Functional Requirements）

> 用 F1/F2/... 编号；每条写清：输入、输出、规则、异常、验收点。

### 5.1 功能 F1：{{TITLE}}

* 描述：
* 业务规则：
* 权限：
* 边界条件：

### 5.2 功能 F2：{{TITLE}}

* 描述：
* 业务规则：
* 权限：
* 边界条件：

## 6. 交互与信息结构（UX/UI）（可选）

* 页面/入口：
* 信息结构：
* ASCII 草图（可选）：

## 6.1 UI 证据（Evidence）（强烈推荐）

> 目的：让“页面长什么样”尽早可感知，避免仅凭想象写长文档导致返工。
>
> 建议：
> * PRD v0：至少提供一个可运行最小原型或 1 张关键截图/录屏
> * PRD v1：主路径 + 关键状态必须有证据（空/加载/失败/成功）

* 原型（推荐）：`/docs/{{EPIC_DIR}}/prototypes/index.html`
* 截图/录屏（可选）：（粘贴链接或相对路径）
* 关键状态说明：
  * 空态：
  * 加载态：
  * 失败态：
  * 成功态：

## 7. 业务约束与风险（Constraints & Risks）

> 说明：本章节记录业务层面的约束条件和风险，不涉及技术实现细节。

### 7.1 用户体验要求

* 响应速度：用户感知层面（如："页面加载流畅"、"操作响应及时"）
* 数据量：用户需要看到多少数据（如："默认展示 XX 条记录"）

### 7.2 错误处理

* 用户体验层面的错误提示（如："显示友好错误信息"、"提供重试按钮"）
* 不涉及技术实现（如 HTTP 状态码、异常处理逻辑）

### 7.3 权限和隐私

* 谁可以访问（业务角色层面）
* 需要保护哪些信息（业务层面，如"不显示敏感个人信息"）

### 7.4 业务约束

* 是否需要分阶段上线（如：先给部分用户使用）
* 是否需要功能开关（业务层面，如："运营人员可以控制是否启用"）
* 其他业务层面的约束（如：只能在特定时间段使用）

### 7.5 业务风险

* 可能的业务风险（如：用户可能不习惯、数据可能不准确）
* 风险缓解措施（业务层面，如："提供使用指南"、"设置检查点"）

## 8. 验收标准（Acceptance Criteria）

> 说明：本章节记录可测试的验收标准，每个 AC 应该包含"步骤 + 期望结果"。

* AC1：
* AC2：

## 9. 待确认问题（[OPEN]）（可选）

> 说明：记录 PRD 编写过程中发现的待确认问题，供后续讨论。

* [OPEN-1]：
* [OPEN-2]：

## 10. 变更记录（Changelog）

| 版本 | 日期 | 修改人 | 修改内容 |
|------|------|--------|----------|
| v1.0 | {{YYYY-MM-DD}} | {{OWNER}} | 初版 |
